{"componentChunkName":"component---src-templates-blog-template-js","path":"/blog/github-auth-gcm","result":{"data":{"markdownRemark":{"html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 581px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f9f248abee210aebc6f5c523eb8e9bdd/92d15/top.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABgUlEQVQoz2WRO0sDQRRGg0Hz2s1uNuZlYsCQoFFi1leiIhJsLCwEBcVCO0sF0UrURhHB0kawsvIPCFpZ2FgoKIhgY+EDYiBgYWlxnFncJeDA5c7Od+/Zb+641FAMRY8SNOJ4AiGS6Sxrm9tMzczT7NOQesAfQdVjlj5amWRucZlYKoNXMbD7ZZbhsjcy/MFWzi8u4eMValVmF5Zo8ikkSjlaFI2JyWneqnV+gJPTM1EfobHfAUp3PvG39kwnn9UqLwd78HDL4dExroAP82ACt66yur6Fve4en4m3Zy0Tquh3gLZdCXV7VHZ29/n+eOfp/p5Cf5kWv45mJPCK6+a6Ta6ub6jVv1he2cAjtGADzHFoQ2Vu9gbJm0NEkx3WzLRwwtElPC5mly/0W/MNSHd/fXaNA9Ra2+jpG8YsjwsnfeTyJj1mmYzIhYFhiqUxikNjdBdLdPUOMjBSEecjlsN/j6KIF1QlNNyGLsBGNIUeSVruZMgzO+R3SGjhWNqqa4TJ+AXMkd8TjjOqoAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"auth-with-gcm\"\n        title=\"auth-with-gcm\"\n        src=\"/static/f9f248abee210aebc6f5c523eb8e9bdd/92d15/top.png\"\n        srcset=\"/static/f9f248abee210aebc6f5c523eb8e9bdd/8a4e8/top.png 150w,\n/static/f9f248abee210aebc6f5c523eb8e9bdd/5a46d/top.png 300w,\n/static/f9f248abee210aebc6f5c523eb8e9bdd/92d15/top.png 581w\"\n        sizes=\"(max-width: 581px) 100vw, 581px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>概要</h3>\n<ul>\n<li>2021年8月13日をもって、パスワードでのGitHubユーザ認証が廃止となり、Access Tokenでの認証が必須になった（<a href=\"https://github.blog/2020-12-15-token-authentication-requirements-for-git-operations/\">参考</a>）</li>\n<li>そこで、GCM Core経由でAccess Tokenを設定し、ユーザ認証をする方法を記しておく</li>\n</ul>\n<h3>What is GCM Core?</h3>\n<ul>\n<li><a href=\"https://github.com/microsoft/Git-Credential-Manager-Core\">https://github.com/microsoft/Git-Credential-Manager-Core</a></li>\n<li>Git Credentials Manage Coreの略</li>\n<li>Gitのcredentialを管理するためのツール</li>\n<li>2021年8月14日現在、Windows/MacOSはProductionリリースがされており、LinuxはEarly previewの段階</li>\n</ul>\n<h2>手順</h2>\n<h3>1. GCM Coreのインストール</h3>\n<ul>\n<li>自分の環境はUbuntu 20.04なので、<a href=\"https://github.com/microsoft/Git-Credential-Manager-Core/releases/tag/v2.0.498\">こちら</a>から .deb をダウンロード</li>\n<li>以下のコマンドでインストールとconfigurationを行う（<a href=\"https://github.com/microsoft/Git-Credential-Manager-Core#linux-install-instructions\">こちら</a>の手順通り）</li>\n</ul>\n<pre><code class=\"language-bash\">sudo dpkg -i &#x3C;.debファイルのパスを指定>\ngit-credential-manager-core configure\n</code></pre>\n<h3>2. gitの設定</h3>\n<ul>\n<li><a href=\"https://github.com/microsoft/Git-Credential-Manager-Core/blob/main/docs/linuxcredstores.md\">こちら</a>の手順に従って、credentials storeの設定を行う</li>\n<li>今回は環境変数ではなく、git globalの設定に書き込む方式で行く</li>\n</ul>\n<pre><code class=\"language-bash\">git config --global credential.credentialStore secretservice\n</code></pre>\n<h3>3. Web認証</h3>\n<ul>\n<li>適当なPrivate reposirotyをcloneする</li>\n<li>この時、認証がWeb browser or Access Tokenで行われる（下記質問が出る）</li>\n</ul>\n<pre><code class=\"language-bash\">$ git clone https://github.com/Shunpoco/&#x3C;private repository>.git\nCloning into '&#x3C;private repository>'...\nSelect an authentication method for 'https://github.com/':\n  1. Web browser (default)\n  2. Personal access token\noption (enter for default): 1\n</code></pre>\n<ul>\n<li>今回は 1 のWeb browser認証を選択</li>\n<li>以下のような画面になるので Authorize GitCredentialManager をクリック\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1ce1ea5f511588059747ee51c65b80cf/36bb5/auth.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 126%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAAAsSAAALEgHS3X78AAADrklEQVQ4y31VTW8bVRQNrZL4e8bzPePxeMb2jB3b8biOHUKK1BTaCNFKFRJVF92ki27YUKlps6iQqEQXSOwQC5BAsAXBbyj/IbBhg0DsQAIJ2KHDvc996SSZ1NLRPL83c+bccz9mqVq3waioFmqag+WCgvn2Jdx9dx+230axqqNSMlGpWWJ96ep17OxeX+zTM/J5iSW5YLLVkorBZI5ff/wB+OkQ333zLZZpz9tOsKKpePvWHn7/82/88dc/uHn7Ds6vVqHobj4hH5xbqeD1N2/g399+wX9ff4mfDw9RVCzEezOs+jr2Dx5D/vYfPcZLy+V8Qimdryuk6NF77+Pp0++xe+0Gzi1XUC4bWCErnGYHn33+FT759AtYjTYKFU1Elg19KUum6B78qIe65ROa0J1A/PdaMfx2Hw55arqhAK8NOs+S8Tqj0IJqNNAdTJAQ2r11gYCIwniEeDhFTPud/lisR9Mt2I0IZcVENsolmd1C1aDMGSiU61glFCryqqFIKJRVFBm0v7hqR5VRZWQVFmsGppubGE6mQk1vfQO90Qb64xmpTeF0UpjxFuFlmL1XYSavQLUjVNWFulOEpZqJdLaOqJdAs0PYzS6cIEYj7CFMRuJqB+StQyRGEzWrRSSuIDjlodzQ7BYaZP5oPIbruTCs529dwHwOxTwi4pBrWYXywPY7aHe6uDiLsTUJsZa0YFA2T5ZFFsJDqsPayZArqg3dbsL0QrhBIkK03ECoySPJ/s9NCqfej/poUolEvRTphSne2Elh2Q6dWWeSyQ7LDbluNqBRMXMR29QFJcr8cQ+tXNIzC5vVscr+eI6ECpdJLS8S3jI06p48harhnVYojefQSzX9SN0xKPQAhZ+HU2XDhOyFQm/LvlHssUd8dWnfdTNwxFVxaF8/pnDB7lIhhwn1bndIYW9St8wQxEO0Iirs2RqiJzPEH2xh9tEuLn/8FtIPL6P7ZBPBwQSK71EEpDY7bXgcsYdcMu1+StkewwsTuI0Y1qAN750hBve2ceHBDjYevob5wRUM71+Eu7cGxfMWltRllp95KDuAPeSh4AZd9NM5TZkp+mukOBygWKRhUdIFSiWDZiXVqprjoWzybCvxXORs2z5lu0mz0OMetoVnAifuP0bIdSjbiBMjE5J9ibxPyZyf2cuclKAzoHoc0KjvClLDaQlvuQ75nL+CFg1V9pjRII/LipE/bWSRqqTgrGFw9Kl4dp/8QOUqzLaZXHMrsiKGUEfDQ5y9oAX/BzRvoaa4FS/aAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Auth\"\n        title=\"Auth\"\n        src=\"/static/1ce1ea5f511588059747ee51c65b80cf/0a47e/auth.png\"\n        srcset=\"/static/1ce1ea5f511588059747ee51c65b80cf/8a4e8/auth.png 150w,\n/static/1ce1ea5f511588059747ee51c65b80cf/5a46d/auth.png 300w,\n/static/1ce1ea5f511588059747ee51c65b80cf/0a47e/auth.png 600w,\n/static/1ce1ea5f511588059747ee51c65b80cf/36bb5/auth.png 611w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></li>\n<li>以下のような画面に遷移すれば成功。タブを閉じる\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a85a1722789367d0c2ec84a031b6501d/fcda8/success.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAAA1UlEQVQoz62RQQrCMBBFe/9bqCcQwRMIahFqW6ldqSsFk1JF2zS2yTcTrRpBceHAzwz5mTcD8crqgkJIR6eyQqOBIIzR6faQrjZYDwfIh32UCiiM/95DIpZHhTCFkK7IvNTKetJkaSYIEvkf3hPLK82hlBlrQ+NzfPNgoQ9gcwdSizZ1kiSY+DPMowhT30cYL7BMUwTBHKG5G40nyA/HW4/WVg7wuSFwPp+wZww8y8A4tzVlds8849juttYnUBtVC6Sjrhu7ZSul9A9STo+oXoD/En3MFW4GHMIZqH8nAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Success\"\n        title=\"Success\"\n        src=\"/static/a85a1722789367d0c2ec84a031b6501d/fcda8/success.png\"\n        srcset=\"/static/a85a1722789367d0c2ec84a031b6501d/8a4e8/success.png 150w,\n/static/a85a1722789367d0c2ec84a031b6501d/5a46d/success.png 300w,\n/static/a85a1722789367d0c2ec84a031b6501d/fcda8/success.png 590w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></li>\n<li>cloneが進行して完了。今後はPrivate repositoryのcloneやpushなどの動作も認証無しで行うことができる。</li>\n</ul>\n<pre><code class=\"language-bash\">info: please complete authentication in your browser...\nremote: Enumerating objects: 374, done.\nremote: Counting objects: 100% (374/374), done.\nremote: Compressing objects: 100% (265/265), done.\nremote: Total 374 (delta 133), reused 287 (delta 49), pack-reused 0\nReceiving objects: 100% (374/374), 38.37 KiB | 553.00 KiB/s, done.\nResolving deltas: 100% (133/133), done.\n</code></pre>\n<h2>参考資料</h2>\n<p><a href=\"https://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/creating-a-personal-access-token\">Creating a personal access token</a></p>\n<p><a href=\"https://github.com/microsoft/Git-Credential-Manager-Core\">GitHub - microsoft/Git-Credential-Manager-Core: Secure, cross-platform Git credential storage with authentication to GitHub, Azure Repos, and other popular Git hosting services.</a></p>","frontmatter":{"date":"August 17, 2021","slug":"/blog/github-auth-gcm","title":"GCM CoreでGitHubの認証を行う","image":"github-auth-gcm/top.png"}}},"pageContext":{"slug":"/blog/github-auth-gcm"}},"staticQueryHashes":["3649515864","63159454"]}