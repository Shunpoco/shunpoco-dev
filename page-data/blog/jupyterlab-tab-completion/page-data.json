{"componentChunkName":"component---src-templates-blog-template-js","path":"/blog/jupyterlab-tab-completion","result":{"data":{"markdownRemark":{"html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsSAAALEgHS3X78AAAD1UlEQVQ4y21U/U9aZxTmb6jg/AK5H+8Ll08BEUtHXdFtVLusg2k1cToapl2h6QemtGariySo2MXMuBhrom7RH1wy04hGU6t2JibOxSgrBULqMmLNEt10Up1lLbiDNGi2PTm5ee/Nec553vNxWQfHEI/Hk4fI7u5PK489D2bGHz76ORDafxH9l0MSrNQpFovBc+XxE5v91hndqffV6GMtYdYSxpOCc+++/UVLe/jZesrtiJyMF4+9crZ3aMS0uzg9bCUOGtHBZzhhjeiXT3PbijklJ5V9Q98dz89KKb509YZJciJko59eZYYuoJZz6M5Z3HQW330P3a/Gv9mZ1ctEZd4bTndHis9KynC13X1HkPbNBWF5IUYIcUmcSTHZ9KFRDIkYBiPLaez5CBtl6f3fDiX1JzKveL2IJvUykkfSJzJyaJqWSSV5MqkyTw4ml0ooksRYkEkgikYfqHLVCvmv4fBr2Xa7PY3NJmiMMbp40WwwGCQSiUaj0Wq1arW6qKjIZrPBWSIWYQHm05jNTnO5XAny9vZ2QUFBbi6PpimhUBgKhVpbW0mSVCgUBYeoqanZ2toqKytjs9k0RQswzs7J0ev1e3t7rMXFRYIgKIoCtSKRKBAINDc3m0ymwcHBvr6+qqoqs9m8vr7e3d3d09MDIfh8PjiDSPBkeTweLpdLH0IsFgeDQSBXVlYODw+vra3Nzs5aLBZQNzIyAml8Ph+oIw4xMzOTIPN4vBTZ7/c7nc6Ghobp6en5+Xmv12u1Wjc2NuDmpaWlkUhEp9NBMiBPTU0lZMMNk7KBHA6H3W73wsLC3Nzc2NjY6upqfX19NBrt7e0dHR2FijAMA8qhncvLy6zNzU2oZFI5SOrq6qqtra2rq5ucnBwYGOjs7KyoqIDbAnliYsJoNEJpAZAf5CRadcvh4HA4FIJOIZIkIDZUTi6Xy2QypVKZn58PQUEaRRJAI5EgncNxOByv+7y0tCQWixQCPpekeRQGMgyGQi5TKRVK6JhcJpdJIVwOJYBZOK/iK6XMwo+LR7Pt/rKjhMnoPI9KVYhP0VmkIJsS8pAILItigAazVV6IhquwSZ7R7GqD6U6QkyO++/z59Zu3q1VZvkuk97Lwngl/bkDXS/CNYtxkQP3lKHhF+NRGVasyP7Fd2/lzO7kbRysZ2dlpamk/o5Z+Zch6doWI3UYHjbCPON6I4BU+nlaIbt5xbv3x+9FWHf8zvHr5cvrRDxbrNb3u1IeFuE5Hg5k0+K03C2vrrRMPHv4djf7/nySFF/v7/kDw/vjk170DXff6v/eM+5749//a+6/nP3SpbnFG1SJ/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"jupyerlab-logo\"\n        title=\"jupyerlab-logo\"\n        src=\"/static/bfb19e78111e556f11c29bd6ce72629d/772e8/jupyterlab-logo.png\"\n        srcset=\"/static/bfb19e78111e556f11c29bd6ce72629d/8a4e8/jupyterlab-logo.png 150w,\n/static/bfb19e78111e556f11c29bd6ce72629d/772e8/jupyterlab-logo.png 200w\"\n        sizes=\"(max-width: 200px) 100vw, 200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<div style=\"text-align: center; font-size: 14px; color: grey; margin-bottom: 20px;\">this picture is from <a href=\"https://jupyter.org/\" style=\"text-decoration: none;\" >here</a>\n</div>\n<p>In this article, I introduce what error I caught when using <a href=\"https://github.com/jupyterlab/jupyterlab\">Jupyterlab</a>'s tab completion.</p>\n<h3>Problem</h3>\n<p>When I launched a new pipenv project for analyzing data, I found that I couldn't use tab-completion (fig.1 and fig.2).</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAAB0UlEQVQoz22Ra4/SUBCG+f+Jbvysmxj9C8ZkBSG4SwkILAmXUne3FuiFUqBA7zceT7vJatRJns6cM83bmb61xWJBiaZpmJaJZVnouo6xUnlQNeTHn2x2Lq4fsnXPTKYzut0u/X6fXq9X0ZUkOp0Oksg1x3EIwxDP8/D9gDCKqnMkcixwXZc0TcjznKIoyLKM9A8yce/5PsfjifV6TS1JEso4BUeWO5WtvcG2LZy9TShezEQ/Fh8oiYLgpf77Lk9TFEWhVk5SRigmXXYldLFKyWY4xBoMMb8PqlyyvR9jj+4FI9EfYYie2pEwen12ssx8PqeWxs+CnmHweFNHa7VRvzZRbr4w/fS5qrVmE7XRQG9/Y9lq8VSvs263RW5g3XWwbm9xxuPKi9rei8iEYCHW8x8Uzj9kvEcFdzEDYwlbi8iw8FYGoW4RrE1O2roiNm3y7Z5s45Adjs8TzuyQ9ALS04ZXks0HpeDjIuF6FnM18Hg/8XCCFC8X/zmFc/ab8nxMLhWusGJWCiZxXK080mxe35lcdfdcTyLeTRPejELeDg+o2kq4Hws3Q/zgXzxBFCfIpWAsBC+lYpFzCVxOtk7mH3iJLMQyzaq8XIry8X9EyMKYX+u+mbIpA/yOAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"example1\"\n        title=\"example1\"\n        src=\"/static/50b024eb6652cb2cf227c3b54d3e42e2/0a47e/example1.png\"\n        srcset=\"/static/50b024eb6652cb2cf227c3b54d3e42e2/8a4e8/example1.png 150w,\n/static/50b024eb6652cb2cf227c3b54d3e42e2/5a46d/example1.png 300w,\n/static/50b024eb6652cb2cf227c3b54d3e42e2/0a47e/example1.png 600w,\n/static/50b024eb6652cb2cf227c3b54d3e42e2/4597d/example1.png 631w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<div style=\"text-align: center; font-size: 14px; color: grey; margin-bottom: 20px;\">Fig.1: Normally, we can use tab-completion on Jupyterlab.</div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 28.666666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAAA60lEQVQY053QXW+DIBiGYf//39Iaj9ajJTOu2i9TV9eqiICovYe69GgHzUiuAE8I8L5eHMdkWUZRFItznpOf9pxOB96TlM/DmUpq6s5wrQRv2y1hGBJF0dNms8H3fYIgwOu6jrZtkUIyr5XSaKc3xuWCpmmYxnE1jQzDgLXOMlsGl0spuVfV8iEPN7RRJGVMUV74Ki5cbjlNXWN7s1yslXoy+m8P99jxeMSTFu7SsLvWXN2m/PXdDdzU+JL5bNXDR7LD68cHUvfcGoVQllavhMuEepWhsxPJLl1Lnvsz2N6V+D9zWx7TRJam/ABDasnOHDx4pAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"example2\"\n        title=\"example2\"\n        src=\"/static/d0f4445a0b46150e99c2d75550097eb2/0a47e/example2.png\"\n        srcset=\"/static/d0f4445a0b46150e99c2d75550097eb2/8a4e8/example2.png 150w,\n/static/d0f4445a0b46150e99c2d75550097eb2/5a46d/example2.png 300w,\n/static/d0f4445a0b46150e99c2d75550097eb2/0a47e/example2.png 600w,\n/static/d0f4445a0b46150e99c2d75550097eb2/af590/example2.png 626w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<div style=\"text-align: center; font-size: 14px; color: grey; margin-bottom: 20px;\">Fig.2: Even if we push tab, tab-completion doesn't run.</div>\n<p>And in the command line, I caught an error as below.</p>\n<pre><code class=\"language-bash\">[IPKernelApp] ERROR | Exception in message handler:\nTraceback (most recent call last):\n  File \"/home/shunpoco/.local/share/virtualenvs/jpyter-completion-0WWZHx2p/lib/python3.8/site-packages/ipykernel/kernelbase.py\", line 261, in dispatch_shell\n    yield gen.maybe_future(handler(stream, idents, msg))\n  File \"/home/shunpoco/.local/share/virtualenvs/jpyter-completion-0WWZHx2p/lib/python3.8/site-packages/tornado/gen.py\", line 762, in run\n    value = future.result()\n  File \"/home/shunpoco/.local/share/virtualenvs/jpyter-completion-0WWZHx2p/lib/python3.8/site-packages/tornado/gen.py\", line 234, in wrapper\n    yielded = ctx_run(next, result)\n  File \"/home/shunpoco/.local/share/virtualenvs/jpyter-completion-0WWZHx2p/lib/python3.8/site-packages/ipykernel/kernelbase.py\", line 576, in complete_request\n    matches = yield gen.maybe_future(self.do_complete(code, cursor_pos))\n  File \"/home/shunpoco/.local/share/virtualenvs/jpyter-completion-0WWZHx2p/lib/python3.8/site-packages/ipykernel/ipkernel.py\", line 356, in do_complete\n    return self._experimental_do_complete(code, cursor_pos)\n  File \"/home/shunpoco/.local/share/virtualenvs/jpyter-completion-0WWZHx2p/lib/python3.8/site-packages/ipykernel/ipkernel.py\", line 381, in _experimental_do_complete\n    completions = list(_rectify_completions(code, raw_completions))\n  File \"/home/shunpoco/.local/share/virtualenvs/jpyter-completion-0WWZHx2p/lib/python3.8/site-packages/IPython/core/completer.py\", line 484, in rectify_completions\n    completions = list(completions)\n  File \"/home/shunpoco/.local/share/virtualenvs/jpyter-completion-0WWZHx2p/lib/python3.8/site-packages/IPython/core/completer.py\", line 1818, in completions\n    for c in self._completions(text, offset, _timeout=self.jedi_compute_type_timeout/1000):\n  File \"/home/shunpoco/.local/share/virtualenvs/jpyter-completion-0WWZHx2p/lib/python3.8/site-packages/IPython/core/completer.py\", line 1861, in _completions\n    matched_text, matches, matches_origin, jedi_matches = self._complete(\n  File \"/home/shunpoco/.local/share/virtualenvs/jpyter-completion-0WWZHx2p/lib/python3.8/site-packages/IPython/core/completer.py\", line 2029, in _complete\n    completions = self._jedi_matches(\n  File \"/home/shunpoco/.local/share/virtualenvs/jpyter-completion-0WWZHx2p/lib/python3.8/site-packages/IPython/core/completer.py\", line 1373, in _jedi_matches\n    interpreter = jedi.Interpreter(\n  File \"/home/shunpoco/.local/share/virtualenvs/jpyter-completion-0WWZHx2p/lib/python3.8/site-packages/jedi/api/__init__.py\", line 725, in __init__\n    super().__init__(code, environment=environment,\nTypeError: __init__() got an unexpected keyword argument 'column'\n</code></pre>\n<h3>Cause</h3>\n<p>Jupyterlab uses <a href=\"https://github.com/ipython/ipython\">IPython</a> in its background, and IPython uses <a href=\"https://github.com/davidhalter/jedi\">Jedi</a> for its tab completions. Because of Jedi's update to v0.18.0, IPython needs to use libraries <code>sys</code> and <code>traceback</code> in its codebase, but its versions earlier than v7.20.0 don't contain these libraries. Below is my IPython and Jedi's version which caused the problem.</p>\n<pre><code class=\"language-bash\">$ pipenv run pip freeze | grep '.*\\(ipython\\|jedi\\)'\nipython==7.19.0\nipython-genutils==0.2.0\njedi==0.18.0\n</code></pre>\n<p>Reading <a href=\"https://github.com/ipython/ipython/issues/12745\">this issue</a>, we can realize the cause.</p>\n<h3>Solution</h3>\n<p>In IPython v7.20.0 or later versions, this problem fixed (see <a href=\"https://github.com/ipython/ipython/issues/12745#issuecomment-753630904\">this comment</a>). So we just update our IPython version. For example, I installed v7.22.0.</p>\n<pre><code class=\"language-bash\">pipenv install ipython==7.22.0\n</code></pre>\n<p>Now we can use tab completion on Jupyterlab (fig.3)!</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAAB0UlEQVQoz22Ra4/SUBCG+f+Jbvysmxj9C8ZkBSG4SwkILAmXUne3FuiFUqBA7zceT7vJatRJns6cM83bmb61xWJBiaZpmJaJZVnouo6xUnlQNeTHn2x2Lq4fsnXPTKYzut0u/X6fXq9X0ZUkOp0Oksg1x3EIwxDP8/D9gDCKqnMkcixwXZc0TcjznKIoyLKM9A8yce/5PsfjifV6TS1JEso4BUeWO5WtvcG2LZy9TShezEQ/Fh8oiYLgpf77Lk9TFEWhVk5SRigmXXYldLFKyWY4xBoMMb8PqlyyvR9jj+4FI9EfYYie2pEwen12ssx8PqeWxs+CnmHweFNHa7VRvzZRbr4w/fS5qrVmE7XRQG9/Y9lq8VSvs263RW5g3XWwbm9xxuPKi9rei8iEYCHW8x8Uzj9kvEcFdzEDYwlbi8iw8FYGoW4RrE1O2roiNm3y7Z5s45Adjs8TzuyQ9ALS04ZXks0HpeDjIuF6FnM18Hg/8XCCFC8X/zmFc/ab8nxMLhWusGJWCiZxXK080mxe35lcdfdcTyLeTRPejELeDg+o2kq4Hws3Q/zgXzxBFCfIpWAsBC+lYpFzCVxOtk7mH3iJLMQyzaq8XIry8X9EyMKYX+u+mbIpA/yOAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"example3\"\n        title=\"example3\"\n        src=\"/static/50b024eb6652cb2cf227c3b54d3e42e2/0a47e/example3.png\"\n        srcset=\"/static/50b024eb6652cb2cf227c3b54d3e42e2/8a4e8/example3.png 150w,\n/static/50b024eb6652cb2cf227c3b54d3e42e2/5a46d/example3.png 300w,\n/static/50b024eb6652cb2cf227c3b54d3e42e2/0a47e/example3.png 600w,\n/static/50b024eb6652cb2cf227c3b54d3e42e2/4597d/example3.png 631w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<div style=\"text-align: center; font-size: 14px; color: grey; margin-bottom: 20px;\">Fig.3: Now we can use tab completion!</div>","frontmatter":{"date":"March 30, 2021","slug":"/blog/jupyterlab-tab-completion","title":"Jupyterlab's tab completion doesn't work","image":"jupyterlab-tab-completion/jupyterlab-logo.png"}}},"pageContext":{"slug":"/blog/jupyterlab-tab-completion"}},"staticQueryHashes":["3649515864","63159454"]}